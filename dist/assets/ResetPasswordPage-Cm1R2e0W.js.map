{"version":3,"file":"ResetPasswordPage-Cm1R2e0W.js","sources":["../../src/pages/ResetPasswordPage.tsx"],"sourcesContent":["import { useMemo, useState } from \"react\";\nimport { Link, useNavigate, useSearchParams } from \"react-router-dom\";\nimport { useResetPassword } from \"../features/auth/hooks/useAuthMutations\";\nimport { normalizeApiError } from \"../api/errors\";\nimport { validatePassword } from \"../utils/validation\";\nimport { useToast } from \"../components/ui/ToastProvider\";\n\nexport default function ResetPasswordPage() {\n  const navigate = useNavigate();\n  const { pushToast } = useToast();\n  const [params] = useSearchParams();\n  const token = useMemo(() => params.get(\"token\") || \"\", [params]);\n  const resetMutation = useResetPassword();\n\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  const onSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    const passErr = validatePassword(newPassword);\n    if (passErr) {\n      setError(passErr);\n      return;\n    }\n    if (!token) {\n      setError(\"Invalid reset token.\");\n      return;\n    }\n    setError(\"\");\n    try {\n      await resetMutation.mutateAsync({ token, newPassword });\n      pushToast(\"Password reset successful. Please sign in.\", \"success\");\n      navigate(\"/login\", { replace: true });\n    } catch (err) {\n      setError(normalizeApiError(err).message);\n    }\n  };\n\n  return (\n    <div>\n      <h2 className=\"text-2xl font-semibold text-slate-900\">Reset password</h2>\n      <p className=\"mt-1 text-sm text-slate-600\">\n        Set a new password for your account.\n      </p>\n      <form className=\"mt-6 space-y-4\" onSubmit={onSubmit}>\n        <label className=\"block\">\n          <span className=\"mb-1 block text-sm font-medium text-slate-700\">\n            New password\n          </span>\n          <input\n            aria-label=\"New password\"\n            className=\"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100\"\n            type=\"password\"\n            autoComplete=\"new-password\"\n            value={newPassword}\n            onChange={(event) => setNewPassword(event.target.value)}\n          />\n        </label>\n        {error ? <p className=\"text-sm text-rose-600\">{error}</p> : null}\n        <button\n          className=\"w-full rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-700 disabled:opacity-70\"\n          type=\"submit\"\n          disabled={resetMutation.isPending}\n        >\n          {resetMutation.isPending ? \"Updating...\" : \"Reset password\"}\n        </button>\n      </form>\n      <p className=\"mt-4 text-sm text-slate-600\">\n        <Link className=\"text-brand-700 hover:underline\" to=\"/login\">\n          Back to login\n        </Link>\n      </p>\n    </div>\n  );\n}\n"],"names":["ResetPasswordPage","navigate","useNavigate","pushToast","useToast","params","useSearchParams","token","useMemo","resetMutation","useResetPassword","newPassword","setNewPassword","useState","error","setError","onSubmit","event","passErr","validatePassword","err","normalizeApiError","jsx","jsxs","Link"],"mappings":"qOAOA,SAAwBA,GAAoB,CAC1C,MAAMC,EAAWC,EAAA,EACX,CAAE,UAAAC,CAAA,EAAcC,EAAA,EAChB,CAACC,CAAM,EAAIC,EAAA,EACXC,EAAQC,UAAQ,IAAMH,EAAO,IAAI,OAAO,GAAK,GAAI,CAACA,CAAM,CAAC,EACzDI,EAAgBC,EAAA,EAEhB,CAACC,EAAaC,CAAc,EAAIC,EAAAA,SAAS,EAAE,EAC3C,CAACC,EAAOC,CAAQ,EAAIF,EAAAA,SAAS,EAAE,EAE/BG,EAAW,MAAOC,GAA4C,CAClEA,EAAM,eAAA,EACN,MAAMC,EAAUC,EAAiBR,CAAW,EAC5C,GAAIO,EAAS,CACXH,EAASG,CAAO,EAChB,MACF,CACA,GAAI,CAACX,EAAO,CACVQ,EAAS,sBAAsB,EAC/B,MACF,CACAA,EAAS,EAAE,EACX,GAAI,CACF,MAAMN,EAAc,YAAY,CAAE,MAAAF,EAAO,YAAAI,EAAa,EACtDR,EAAU,6CAA8C,SAAS,EACjEF,EAAS,SAAU,CAAE,QAAS,EAAA,CAAM,CACtC,OAASmB,EAAK,CACZL,EAASM,EAAkBD,CAAG,EAAE,OAAO,CACzC,CACF,EAEA,cACG,MAAA,CACC,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,iBAAc,EACpEA,EAAAA,IAAC,IAAA,CAAE,UAAU,8BAA8B,SAAA,uCAE3C,EACAC,EAAAA,KAAC,OAAA,CAAK,UAAU,iBAAiB,SAAAP,EAC/B,SAAA,CAAAO,EAAAA,KAAC,QAAA,CAAM,UAAU,QACf,SAAA,CAAAD,EAAAA,IAAC,OAAA,CAAK,UAAU,gDAAgD,SAAA,eAEhE,EACAA,EAAAA,IAAC,QAAA,CACC,aAAW,eACX,UAAU,0IACV,KAAK,WACL,aAAa,eACb,MAAOX,EACP,SAAWM,GAAUL,EAAeK,EAAM,OAAO,KAAK,CAAA,CAAA,CACxD,EACF,EACCH,EAAQQ,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,WAAM,EAAO,KAC5DA,EAAAA,IAAC,SAAA,CACC,UAAU,iHACV,KAAK,SACL,SAAUb,EAAc,UAEvB,SAAAA,EAAc,UAAY,cAAgB,gBAAA,CAAA,CAC7C,EACF,EACAa,EAAAA,IAAC,IAAA,CAAE,UAAU,8BACX,SAAAA,EAAAA,IAACE,EAAA,CAAK,UAAU,iCAAiC,GAAG,SAAS,SAAA,eAAA,CAE7D,CAAA,CACF,CAAA,EACF,CAEJ"}