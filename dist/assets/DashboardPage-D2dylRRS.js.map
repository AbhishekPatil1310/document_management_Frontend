{"version":3,"file":"DashboardPage-D2dylRRS.js","sources":["../../src/hooks/useDebounce.ts","../../src/features/documents/components/DocumentTable.tsx","../../src/features/documents/components/UploadPanel.tsx","../../src/api/documents.api.ts","../../src/features/documents/hooks/useDocuments.ts","../../src/pages/DashboardPage.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nexport const useDebounce = <T>(value: T, delay = 250) => {\n  const [debounced, setDebounced] = useState(value);\n\n  useEffect(() => {\n    const timer = setTimeout(() => setDebounced(value), delay);\n    return () => clearTimeout(timer);\n  }, [value, delay]);\n\n  return debounced;\n};\n","import { memo } from \"react\";\nimport type { DocumentItem } from \"../../../api/documents.api\";\nimport { formatBytes, formatDateTime, truncate } from \"../../../utils/format\";\n\ntype DocumentTableProps = {\n  documents: DocumentItem[];\n  onDownload: (id: string) => void;\n  onDelete: (id: string) => void;\n  pendingDeleteId?: string | null;\n};\n\nconst DocumentTableComponent = ({\n  documents,\n  onDownload,\n  onDelete,\n  pendingDeleteId\n}: DocumentTableProps) => (\n  <div className=\"overflow-hidden rounded-xl border border-slate-200 bg-white shadow-soft\">\n    <div className=\"overflow-x-auto\">\n      <table className=\"min-w-full divide-y divide-slate-200\">\n        <thead className=\"bg-slate-50\">\n          <tr>\n            <th className=\"px-4 py-3 text-left text-xs font-semibold uppercase text-slate-500\">\n              File\n            </th>\n            <th className=\"px-4 py-3 text-left text-xs font-semibold uppercase text-slate-500\">\n              Size\n            </th>\n            <th className=\"px-4 py-3 text-left text-xs font-semibold uppercase text-slate-500\">\n              Uploaded\n            </th>\n            <th className=\"px-4 py-3 text-right text-xs font-semibold uppercase text-slate-500\">\n              Actions\n            </th>\n          </tr>\n        </thead>\n        <tbody className=\"divide-y divide-slate-100\">\n          {documents.map((doc) => (\n            <tr key={doc.id} className=\"hover:bg-slate-50\">\n              <td className=\"px-4 py-3 text-sm text-slate-700\" title={doc.file_name}>\n                {truncate(doc.file_name, 65)}\n              </td>\n              <td className=\"px-4 py-3 text-sm text-slate-600\">\n                {formatBytes(doc.file_size)}\n              </td>\n              <td className=\"px-4 py-3 text-sm text-slate-600\">\n                {formatDateTime(doc.created_at)}\n              </td>\n              <td className=\"px-4 py-3 text-right\">\n                <div className=\"inline-flex gap-2\">\n                  <button\n                    className=\"rounded-md border border-slate-300 px-3 py-1.5 text-xs font-medium text-slate-700 hover:bg-slate-100\"\n                    onClick={() => onDownload(doc.id)}\n                  >\n                    Download\n                  </button>\n                  <button\n                    className=\"rounded-md border border-rose-300 px-3 py-1.5 text-xs font-medium text-rose-600 hover:bg-rose-50\"\n                    onClick={() => onDelete(doc.id)}\n                    disabled={pendingDeleteId === doc.id}\n                  >\n                    {pendingDeleteId === doc.id ? \"Deleting...\" : \"Delete\"}\n                  </button>\n                </div>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  </div>\n);\n\nexport const DocumentTable = memo(DocumentTableComponent);\n","import { useRef } from \"react\";\nimport { formatBytes } from \"../../../utils/format\";\n\nconst MAX_FILE_SIZE = 10 * 1024 * 1024;\nconst ALLOWED_TYPES = [\"application/pdf\", \"image/jpeg\", \"image/png\"];\n\ntype UploadPanelProps = {\n  isUploading: boolean;\n  progress: number;\n  onFileSelected: (file: File) => void;\n};\n\nexport const UploadPanel = ({ isUploading, progress, onFileSelected }: UploadPanelProps) => {\n  const inputRef = useRef<HTMLInputElement | null>(null);\n\n  return (\n    <section className=\"rounded-xl border border-slate-200 bg-white p-4 shadow-soft\">\n      <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\n        <div>\n          <h2 className=\"text-base font-semibold text-slate-900\">Upload document</h2>\n          <p className=\"text-sm text-slate-600\">\n            Allowed: PDF, JPG, PNG. Max size: {formatBytes(MAX_FILE_SIZE)}.\n          </p>\n        </div>\n        <button\n          className=\"rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-700 disabled:opacity-70\"\n          disabled={isUploading}\n          onClick={() => inputRef.current?.click()}\n        >\n          {isUploading ? \"Uploading...\" : \"Choose File\"}\n        </button>\n      </div>\n\n      <input\n        ref={inputRef}\n        aria-label=\"Upload legal document\"\n        type=\"file\"\n        className=\"hidden\"\n        accept={ALLOWED_TYPES.join(\",\")}\n        onChange={(event) => {\n          const file = event.target.files?.[0];\n          if (!file) return;\n          onFileSelected(file);\n          event.target.value = \"\";\n        }}\n      />\n\n      {isUploading ? (\n        <div className=\"mt-3\">\n          <div className=\"h-2 rounded-full bg-slate-200\">\n            <div\n              className=\"h-2 rounded-full bg-brand-500 transition-all\"\n              style={{ width: `${progress}%` }}\n            />\n          </div>\n          <p className=\"mt-1 text-xs text-slate-600\">{progress}% uploaded</p>\n        </div>\n      ) : null}\n    </section>\n  );\n};\n\nexport const validateUploadFile = (file: File): string => {\n  if (!ALLOWED_TYPES.includes(file.type)) {\n    return \"File type not allowed. Use PDF, JPG, or PNG.\";\n  }\n  if (file.size > MAX_FILE_SIZE) {\n    return \"File exceeds 10MB limit.\";\n  }\n  return \"\";\n};\n","import axios from \"axios\";\nimport { apiClient } from \"./axios\";\n\nexport type DocumentItem = {\n  id: string;\n  file_name: string;\n  mime_type: string;\n  file_size: number;\n  created_at: string;\n};\n\nexport type DocumentsResponse = {\n  page: number;\n  total: number;\n  totalPages: number;\n  documents: DocumentItem[];\n};\n\ntype UploadUrlPayload = {\n  file_name: string;\n  mime_type: string;\n  file_size: number;\n};\n\ntype ConfirmUploadPayload = {\n  storageKey: string;\n  file_name: string;\n  mime_type: string;\n  file_size: number;\n};\n\nexport const documentsApi = {\n  list: async (page: number, limit: number) => {\n    const { data } = await apiClient.get<DocumentsResponse>(\"/documents\", {\n      params: { page, limit }\n    });\n    return data;\n  },\n  generateUploadUrl: async (payload: UploadUrlPayload) => {\n    const { data } = await apiClient.post<{ uploadUrl: string; storageKey: string }>(\n      \"/documents/upload-url\",\n      payload\n    );\n    return data;\n  },\n  uploadToSignedUrl: async (\n    uploadUrl: string,\n    file: File,\n    onProgress?: (progress: number) => void\n  ) => {\n    await axios.put(uploadUrl, file, {\n      headers: { \"Content-Type\": file.type },\n      onUploadProgress: (event) => {\n        if (!event.total || !onProgress) return;\n        onProgress(Math.round((event.loaded * 100) / event.total));\n      }\n    });\n  },\n  confirmUpload: async (payload: ConfirmUploadPayload) => {\n    const { data } = await apiClient.post<DocumentItem>(\"/documents/confirm\", payload);\n    return data;\n  },\n  getDownloadUrl: async (id: string) => {\n    const { data } = await apiClient.get<{ downloadUrl: string }>(\n      `/documents/${id}/download`\n    );\n    return data;\n  },\n  delete: async (id: string) => {\n    const { data } = await apiClient.delete<{ message: string }>(`/documents/${id}`);\n    return data;\n  }\n};\n","import { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { documentsApi, type DocumentsResponse } from \"../../../api/documents.api\";\n\nconst PAGE_LIMIT = 10;\n\nexport const useDocuments = (page: number) =>\n  useQuery({\n    queryKey: [\"documents\", page],\n    queryFn: () => documentsApi.list(page, PAGE_LIMIT),\n    placeholderData: (previousData) => previousData,\n    staleTime: 30_000\n  });\n\ntype UploadInput = {\n  file: File;\n  onProgress?: (progress: number) => void;\n};\n\nexport const useUploadDocument = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async ({ file, onProgress }: UploadInput) => {\n      const signed = await documentsApi.generateUploadUrl({\n        file_name: file.name,\n        file_size: file.size,\n        mime_type: file.type\n      });\n      await documentsApi.uploadToSignedUrl(signed.uploadUrl, file, onProgress);\n      return documentsApi.confirmUpload({\n        storageKey: signed.storageKey,\n        file_name: file.name,\n        file_size: file.size,\n        mime_type: file.type\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"documents\"] });\n    }\n  });\n};\n\nexport const useDeleteDocument = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: (id: string) => documentsApi.delete(id),\n    onMutate: async (id) => {\n      await queryClient.cancelQueries({ queryKey: [\"documents\"] });\n      const previous = queryClient.getQueriesData<DocumentsResponse>({\n        queryKey: [\"documents\"]\n      });\n\n      previous.forEach(([key, value]) => {\n        if (!value) return;\n        queryClient.setQueryData<DocumentsResponse>(key, {\n          ...value,\n          documents: value.documents.filter((doc) => doc.id !== id),\n          total: Math.max(0, value.total - 1)\n        });\n      });\n\n      return { previous };\n    },\n    onError: (_error, _id, context) => {\n      context?.previous.forEach(([key, value]) => queryClient.setQueryData(key, value));\n    },\n    onSettled: () => {\n      queryClient.invalidateQueries({ queryKey: [\"documents\"] });\n    }\n  });\n};\n\nexport const useDownloadDocument = () =>\n  useMutation({\n    mutationFn: (id: string) => documentsApi.getDownloadUrl(id),\n    onSuccess: (data) => {\n      window.open(data.downloadUrl, \"_blank\", \"noopener,noreferrer\");\n    }\n  });\n","import { useMemo, useState } from \"react\";\nimport { useDebounce } from \"../hooks/useDebounce\";\nimport { normalizeApiError } from \"../api/errors\";\nimport { useToast } from \"../components/ui/ToastProvider\";\nimport { EmptyState } from \"../components/ui/EmptyState\";\nimport { TableSkeleton } from \"../components/ui/LoadingSkeleton\";\nimport { QueryErrorState } from \"../components/ui/QueryErrorState\";\nimport { ConfirmDialog } from \"../components/ui/ConfirmDialog\";\nimport { DocumentTable } from \"../features/documents/components/DocumentTable\";\nimport {\n  UploadPanel,\n  validateUploadFile\n} from \"../features/documents/components/UploadPanel\";\nimport {\n  useDeleteDocument,\n  useDocuments,\n  useDownloadDocument,\n  useUploadDocument\n} from \"../features/documents/hooks/useDocuments\";\n\nexport default function DashboardPage() {\n  const [page, setPage] = useState(1);\n  const [search, setSearch] = useState(\"\");\n  const [deleteTargetId, setDeleteTargetId] = useState<string | null>(null);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const debouncedSearch = useDebounce(search, 280);\n\n  const { pushToast } = useToast();\n  const documentsQuery = useDocuments(page);\n  const uploadMutation = useUploadDocument();\n  const downloadMutation = useDownloadDocument();\n  const deleteMutation = useDeleteDocument();\n\n  const filteredDocuments = useMemo(() => {\n    const docs = documentsQuery.data?.documents || [];\n    if (!debouncedSearch.trim()) return docs;\n    const needle = debouncedSearch.trim().toLowerCase();\n    return docs.filter((doc) => doc.file_name.toLowerCase().includes(needle));\n  }, [debouncedSearch, documentsQuery.data?.documents]);\n\n  const onUpload = async (file: File) => {\n    const fileErr = validateUploadFile(file);\n    if (fileErr) {\n      pushToast(fileErr, \"error\");\n      return;\n    }\n\n    setUploadProgress(0);\n    try {\n      await uploadMutation.mutateAsync({\n        file,\n        onProgress: (progress) => setUploadProgress(progress)\n      });\n      pushToast(\"Document uploaded successfully\", \"success\");\n    } catch (err) {\n      pushToast(normalizeApiError(err).message, \"error\");\n    } finally {\n      setUploadProgress(0);\n    }\n  };\n\n  const onDownload = async (id: string) => {\n    try {\n      await downloadMutation.mutateAsync(id);\n    } catch (err) {\n      pushToast(normalizeApiError(err).message, \"error\");\n    }\n  };\n\n  const onDeleteConfirm = async () => {\n    if (!deleteTargetId) return;\n    try {\n      await deleteMutation.mutateAsync(deleteTargetId);\n      pushToast(\"Document deleted\", \"success\");\n      setDeleteTargetId(null);\n    } catch (err) {\n      pushToast(normalizeApiError(err).message, \"error\");\n    }\n  };\n\n  const totalPages = documentsQuery.data?.totalPages || 1;\n\n  return (\n    <div className=\"space-y-4\">\n      <UploadPanel\n        isUploading={uploadMutation.isPending}\n        progress={uploadProgress}\n        onFileSelected={onUpload}\n      />\n\n      <section className=\"rounded-xl border border-slate-200 bg-white p-4 shadow-soft\">\n        <div className=\"mb-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\n          <div>\n            <h2 className=\"text-base font-semibold text-slate-900\">Documents</h2>\n            <p className=\"text-sm text-slate-600\">\n              Secure files uploaded via signed S3 URLs.\n            </p>\n          </div>\n          <input\n            aria-label=\"Search documents\"\n            className=\"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm sm:w-64\"\n            placeholder=\"Search by filename\"\n            value={search}\n            onChange={(event) => setSearch(event.target.value)}\n          />\n        </div>\n\n        {documentsQuery.isPending ? <TableSkeleton rows={6} /> : null}\n\n        {documentsQuery.isError ? (\n          <QueryErrorState\n            message={normalizeApiError(documentsQuery.error).message}\n            onRetry={() => documentsQuery.refetch()}\n          />\n        ) : null}\n\n        {!documentsQuery.isPending && !documentsQuery.isError ? (\n          filteredDocuments.length === 0 ? (\n            <EmptyState\n              title=\"No documents found\"\n              description=\"Upload your first legal document to start building your secure library.\"\n            />\n          ) : (\n            <DocumentTable\n              documents={filteredDocuments}\n              onDownload={onDownload}\n              onDelete={(id) => setDeleteTargetId(id)}\n              pendingDeleteId={\n                deleteMutation.isPending ? (deleteMutation.variables ?? null) : null\n              }\n            />\n          )\n        ) : null}\n\n        <div className=\"mt-4 flex items-center justify-between\">\n          <p className=\"text-sm text-slate-600\">\n            Page {page} of {totalPages}\n          </p>\n          <div className=\"flex gap-2\">\n            <button\n              className=\"rounded-md border border-slate-300 px-3 py-1.5 text-sm text-slate-700 disabled:opacity-50\"\n              disabled={page <= 1}\n              onClick={() => setPage((prev) => Math.max(1, prev - 1))}\n            >\n              Previous\n            </button>\n            <button\n              className=\"rounded-md border border-slate-300 px-3 py-1.5 text-sm text-slate-700 disabled:opacity-50\"\n              disabled={page >= totalPages}\n              onClick={() => setPage((prev) => Math.min(totalPages, prev + 1))}\n            >\n              Next\n            </button>\n          </div>\n        </div>\n      </section>\n\n      <ConfirmDialog\n        isOpen={!!deleteTargetId}\n        title=\"Delete document\"\n        description=\"This permanently removes the file from secure storage. This action cannot be undone.\"\n        confirmLabel=\"Delete\"\n        danger\n        isLoading={deleteMutation.isPending}\n        onCancel={() => setDeleteTargetId(null)}\n        onConfirm={onDeleteConfirm}\n      />\n    </div>\n  );\n}\n"],"names":["useDebounce","value","delay","debounced","setDebounced","useState","useEffect","timer","DocumentTableComponent","documents","onDownload","onDelete","pendingDeleteId","jsx","jsxs","doc","truncate","formatBytes","formatDateTime","DocumentTable","memo","MAX_FILE_SIZE","ALLOWED_TYPES","UploadPanel","isUploading","progress","onFileSelected","inputRef","useRef","_a","event","file","validateUploadFile","documentsApi","page","limit","data","apiClient","payload","uploadUrl","onProgress","axios","id","PAGE_LIMIT","useDocuments","useQuery","previousData","useUploadDocument","queryClient","useQueryClient","useMutation","signed","useDeleteDocument","previous","key","_error","_id","context","useDownloadDocument","DashboardPage","setPage","search","setSearch","deleteTargetId","setDeleteTargetId","uploadProgress","setUploadProgress","debouncedSearch","pushToast","useToast","documentsQuery","uploadMutation","downloadMutation","deleteMutation","filteredDocuments","useMemo","docs","needle","onUpload","fileErr","err","normalizeApiError","onDeleteConfirm","totalPages","_b","TableSkeleton","QueryErrorState","EmptyState","prev","ConfirmDialog"],"mappings":"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"}